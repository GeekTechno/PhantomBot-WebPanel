function ReconnectingWebSocket(e,n){n=n||[];this.debug=false;this.reconnectInterval=1e3;this.timeoutInterval=2e3;var o=this;var t;var c=false;var i=false;this.url=e;this.protocols=n;this.readyState=WebSocket.CONNECTING;this.URL=e;this.onopen=function(e){};this.onclose=function(e){};this.onconnecting=function(e){};this.onmessage=function(e){};this.onerror=function(e){};function s(u){t=new WebSocket(e,n);o.onconnecting();if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","attempt-connect",e)}var l=t;var g=setTimeout(function(){if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","connection-timeout",e)}i=true;l.close();i=false},o.timeoutInterval);t.onopen=function(n){clearTimeout(g);if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onopen",e)}o.readyState=WebSocket.OPEN;u=false;o.onopen(n)};t.onclose=function(n){clearTimeout(g);t=null;if(c){o.readyState=WebSocket.CLOSED;o.onclose(n)}else{o.readyState=WebSocket.CONNECTING;o.onconnecting();if(!u&&!i){if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onclose",e)}o.onclose(n)}setTimeout(function(){s(true)},o.reconnectInterval)}};t.onmessage=function(n){if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onmessage",e,n.data)}o.onmessage(n)};t.onerror=function(n){if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","onerror",e,n)}o.onerror(n)}}s(e);this.send=function(n){if(t){if(o.debug||ReconnectingWebSocket.debugAll){console.debug("ReconnectingWebSocket","send",e,n)}return t.send(n)}else{throw"INVALID_STATE_ERR : Pausing to reconnect websocket"}};this.close=function(){if(t){c=true;t.close()}};this.refresh=function(){if(t){t.close()}}}ReconnectingWebSocket.debugAll=false;
//# sourceMappingURL=rsocket.min.map